# =============================================================================
# Devlogs Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Collector Configuration
# -----------------------------------------------------------------------------
# DEVLOGS_URL is the collector endpoint where applications send logs.
# This is the URL your apps point to for log ingestion.
# Example: http://localhost:8080 or https://collector.example.com
# DEVLOGS_URL=http://localhost:8080

# Forward mode: if set, the collector forwards incoming logs to this URL
# instead of ingesting them directly. Use this for multi-tier deployments.
# DEVLOGS_FORWARD_URL=https://central-collector.example.com

# -----------------------------------------------------------------------------
# OpenSearch Admin Connection
# -----------------------------------------------------------------------------
# These settings configure the admin connection to OpenSearch, used for:
# - CLI commands (search, tail, cleanup, etc.)
# - Web UI queries
# - Collector ingest mode (when not in forward mode)

# Individual connection settings:
DEVLOGS_OPENSEARCH_HOST=localhost
DEVLOGS_OPENSEARCH_PORT=9200
DEVLOGS_OPENSEARCH_USER=admin
DEVLOGS_OPENSEARCH_PASS=YourPasswordHere

# OR use a single URL (overrides individual settings above):
# DEVLOGS_OPENSEARCH_URL=https://admin:password@opensearch.example.com:9200/devlogs-prod

# Connection timeout in seconds
# DEVLOGS_OPENSEARCH_TIMEOUT=30

# SSL/TLS settings
# DEVLOGS_OPENSEARCH_VERIFY_CERTS=true
# DEVLOGS_OPENSEARCH_CA_CERT=/path/to/ca.crt

# -----------------------------------------------------------------------------
# Index Configuration
# -----------------------------------------------------------------------------
# The OpenSearch index name for storing logs
DEVLOGS_INDEX=devlogs-myproject

# -----------------------------------------------------------------------------
# Retention Policy
# -----------------------------------------------------------------------------
# How long to keep logs at each level (supports duration strings: Xh, Xd)
DEVLOGS_RETENTION_DEBUG=24h
DEVLOGS_RETENTION_INFO=7d
DEVLOGS_RETENTION_WARNING=30d

# -----------------------------------------------------------------------------
# Collector Limits (Future Provisions)
# -----------------------------------------------------------------------------
# Rate limit: max requests per second (0 = unlimited)
# DEVLOGS_COLLECTOR_RATE_LIMIT=0

# Max payload size in bytes (0 = unlimited)
# DEVLOGS_COLLECTOR_MAX_PAYLOAD_SIZE=0

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# Auth mode determines how tokens are validated:
#   - allow_anonymous: Token optional; if valid token provided, resolve identity
#   - require_token_passthrough: Token required (any value); preserve payload identity
#   - require_token_verified: Token must be in token map
# DEVLOGS_AUTH_MODE=allow_anonymous

# Token-to-identity mapping (KV format)
# Format: <token>=<id>[,<name>][,<type>][,<tags>];<token>=...
# Tags format: k1:v1|k2:v2
# Percent-encoding required for reserved chars: %;=,|:
# Example:
# DEVLOGS_TOKEN_MAP_KV=dl1_abc123_12345678901234567890123456789012=svc-1,My Service,service,team:backend|env:prod

# Header name for auth token (default: Authorization)
# DEVLOGS_AUTH_HEADER=Authorization

# -----------------------------------------------------------------------------
# Forwarder Routing
# -----------------------------------------------------------------------------
# Per-application index routing for forward mode (KV format)
# Format: <application>=<index>;<application>=...
# Records from unmapped applications use DEVLOGS_INDEX as default
# DEVLOGS_FORWARD_INDEX_MAP_KV=app1=devlogs-app1;app2=devlogs-app2

# Internal forwarder logs index (for forwarder's own diagnostic logs)
# DEVLOGS_FORWARD_INTERNAL_INDEX=devlogs-internal

# -----------------------------------------------------------------------------
# Collector Server Binding
# -----------------------------------------------------------------------------
# Host to bind to (default: 0.0.0.0)
# DEVLOGS_COLLECTOR_HOST=0.0.0.0

# Port to listen on (default: 8080)
# DEVLOGS_COLLECTOR_PORT=8080

# Number of worker processes (default: 1)
# DEVLOGS_COLLECTOR_WORKERS=1

# Log level (default: info)
# DEVLOGS_COLLECTOR_LOG_LEVEL=info
